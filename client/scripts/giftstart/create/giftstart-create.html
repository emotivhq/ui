
<div class="create wrapper shipping" id="giftstart-contact-wrapper" ng-controller="GiftStartCreateController">

    <ng-include ng-show="fromReferral" src="'/scripts/giftstart/brand-pillow/brand-pillow-video.html'"></ng-include>

    <img class="progress" src="/assets/progress_bar_2_of_3.png" ng-hide="fromReferral"/>
    <div class="block image">
        <h2>Preview</h2>
        <div class="image-container">
            <gs-overlay giftstart="giftStart" ng-class="{initialized: pitchInsInitialized}" ng-click="selectionUpdated();"></gs-overlay>
        </div>
    </div>
    <div class="block details">
        <form name="campaignForm" novalidate>
            <h2>Name Your Campaign</h2>
            <label for="campaign-title">Create a name that represents the theme of the gift.</label>
            <input type="text" id="campaign-title" name="title" placeholder="&quot;Grillin' is Awesome Yo&quot;" ng-model="title" required=""/>
            <div ng-show="campaignForm.$submitted || campaignForm.title.$touched" class="errorWrapper">
                <div ng-show="campaignForm.title.$error.required">
                    <div class="arrowUp"></div>
                    <div class="errorMessage">
                        Don't forget to name your campaign!
                    </div>
                </div>
            </div>

            <h2>Tell your story</h2>
            <label for="campaign-description">Make it fun!  Why should your friends join in on this GiftStarter?  Excite them!</label>
            <textarea id="campaign-description" name="description" placeholder="&quot;Yo yo yo-Jim just got a house.  He needs to have a grill-and then invite us over for the SeaFair party of the year since he's right there with the best view on the block!&quot;" maxlength="2000" ng-model="description" ng-blur="onDescriptionBlur()" required=""></textarea>
            <div ng-show="campaignForm.$submitted || campaignForm.description.$touched" class="errorWrapper">
                <div ng-show="campaignForm.description.$error.required">
                    <div class="arrowUp"></div>
                    <div class="errorMessage">
                        Don't forget to include your story!
                    </div>
                </div>
            </div>
            <div id="not-long-enough" ng-hide="descriptionLongEnough">
                <p>Woah there! Looks like your GiftStart description is a bit short.  We know, brevity is the soul of wit - but how about we add to the story to get people more involved?  Here are a few questions for inspiration:</p>
                <ul>
                    <li>Why does the recipient deserve this gift?</li>
                    <li>Is there a story behind the gift or why the recipient might need/want it?</li>
                    <li>What is special/awesome/interesting/unique about this product?</li>
                </ul>
            </div>

            <h2>Where's It Going?</h2>
            <label>All prices include taxes, shipping, and handling, based on destination.</label>
            <div class="shipping-details">
                <span class="state">
                    <label>Recipient's State</label>
                    <select class="state" ng-model="shippingState" name="shippingState" required="" ng-change="shippingChanged()" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }">
                        <option value="AL">AL</option>
                        <option value="AK">AK</option>
                        <option value="AZ">AZ</option>
                        <option value="AR">AR</option>
                        <option value="CA">CA</option>
                        <option value="CO">CO</option>
                        <option value="CT">CT</option>
                        <option value="DE">DE</option>
                        <option value="DC">DC</option>
                        <option value="FL">FL</option>
                        <option value="GA">GA</option>
                        <option value="ID">ID</option>
                        <option value="IL">IL</option>
                        <option value="IN">IN</option>
                        <option value="IA">IA</option>
                        <option value="KS">KS</option>
                        <option value="KY">KY</option>
                        <option value="LA">LA</option>
                        <option value="ME">ME</option>
                        <option value="MT">MT</option>
                        <option value="NE">NE</option>
                        <option value="NV">NV</option>
                        <option value="NH">NH</option>
                        <option value="NJ">NJ</option>
                        <option value="NM">NM</option>
                        <option value="NY">NY</option>
                        <option value="NC">NC</option>
                        <option value="ND">ND</option>
                        <option value="OH">OH</option>
                        <option value="OK">OK</option>
                        <option value="OR">OR</option>
                        <option value="MD">MD</option>
                        <option value="MA">MA</option>
                        <option value="MI">MI</option>
                        <option value="MN">MN</option>
                        <option value="MS">MS</option>
                        <option value="MO">MO</option>
                        <option value="PA">PA</option>
                        <option value="RI">RI</option>
                        <option value="SC">SC</option>
                        <option value="SD">SD</option>
                        <option value="TN">TN</option>
                        <option value="TX">TX</option>
                        <option value="UT">UT</option>
                        <option value="VT">VT</option>
                        <option value="VA">VA</option>
                        <option value="WA">WA</option>
                        <option value="WV">WV</option>
                        <option value="WI">WI</option>
                        <option value="WY">WY</option>
                    </select>
                    <div ng-show="campaignForm.$submitted || campaignForm.shippingState.$touched" class="errorWrapper">
                        <div ng-show="campaignForm.shippingState.$error.required">
                            <div class="arrowUp"></div>
                            <div class="errorMessage">
                                Don't forget to add the state!
                            </div>
                        </div>
                    </div>
                </span>
                <span class="zip">
                    <label>Recipient's Zip</label>
                    <input type="text" class="zip" name="shippingZip" placeholder="Enter zip" minlength="5" maxlength="5" ng-model="shippingZip" required="" ng-change="shippingChanged()" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" />
                    <div ng-show="campaignForm.$submitted || campaignForm.shippingZip.$touched" class="errorWrapper">
                        <div ng-show="campaignForm.shippingZip.$error.required">
                            <div class="arrowUp"></div>
                            <div class="errorMessage">
                                Don't forget to add the zip!
                            </div>
                        </div>
                    </div>
                </span>
                <span class="name">
                    <label>Recipient's Name</label>
                    <input type="text" placeholder="Enter name..." ng-model="shippingName" name="shippingName" required="" />
                    <div ng-show="campaignForm.$submitted || campaignForm.shippingName.$touched" class="errorWrapper">
                        <div ng-show="campaignForm.shippingName.$error.required">
                            <div class="arrowUp"></div>
                            <div class="errorMessage">
                                Don't forget recipient's name!
                            </div>
                        </div>
                    </div>
                </span>
                <span class="email">
                    <label>Recipient Email (they will not be emailed until your gift is delivered)</label>
                    <input type="email" ng-model="shippingEmail" name="shippingEmail" placeholder="recipient@mail.com" required="" />
                    <div ng-show="campaignForm.$submitted || campaignForm.shippingEmail.$touched" class="errorWrapper">
                        <div ng-show="campaignForm.shippingEmail.$error.required">
                            <div class="arrowUp"></div>
                            <div class="errorMessage">
                                Don't forget recipient's email address!
                            </div>
                        </div>
                        <div ng-show="campaignForm.shippingEmail.$error.email">
                            <div class="arrowUp"></div>
                            <div class="errorMessage">
                                Recipient's email address is invalid!
                            </div>
                        </div>
                    </div>
                </span>
            </div>

            <div class="campaign-length">
                <h2>How Long Should this GiftStart Run?</h2>
                <label>Max: 29 days.  Be sure to end your GiftStart at least 7 days before it should arrive.</label>
                <input ui-date
                       type="text"
                       class="endDate"
                       ng-model="campaignEndDate"
                       name="campaignEndDate"
                       placeholder="mm/dd/yyyy"
                       name="campaignEndDate"
                       required="">
                <div ng-show="campaignForm.$submitted || campaignForm.campaignEndDate.$touched" class="errorWrapper">
                    <div ng-show="campaignForm.campaignEndDate.$error.required">
                        <div class="arrowUp"></div>
                        <div class="errorMessage">
                            Your campaign must be between 2 and 29 days!
                        </div>
                    </div>
                    <div ng-show="!dateChosenValid()">
                        <div class="arrowUp"></div>
                        <div class="errorMessage">
                            Your campaign must be between 2 and 29 days!
                        </div>
                    </div>
                </div>

                <label ng-class="{error: !dateChosenValid()}">{{getCampaignLength(campaignEndDate)}} Days</label>
            </div>

            <h2>Minimum Pitch In</h2>
            <label>Consider the number of participants and how much each might want to contribute.  Keep in mind participants can always give more than one part if they wish!</label>
            <div id="num-part-selection">
                <button class="circle" id="less-parts" ng-click="fewerParts()">&lt;</button><span class="parts-control"><span class="money"> {{x*y}} </span> parts at <span class="money" ng-hide="fetchingTaxRate"> ${{ totalPrice/100/x/y | number : 2 }} </span><img class="loading"  src="/assets/loading.gif" ng-show="fetchingTaxRate"/> each</span><button class="circle" id="more-parts" ng-click="moreParts()">&gt;</button>
                <button class="help float-right" ng-click="help()">Help</button>
            </div>

            <div class="email">
                <h2>Your Email Address</h2>
                <input type="email" id="contact-email" placeholder="username@mail.com" name="gcEmail" ng-model="gcEmail" required="">
                <div ng-show="campaignForm.$submitted || campaignForm.gcEmail.$touched" class="errorWrapper">
                    <div ng-show="campaignForm.gcEmail.$error.required">
                        <div class="arrowUp"></div>
                        <div class="errorMessage">
                            Don't forget your email address!
                        </div>
                    </div>
                    <div ng-show="campaignForm.gcEmail.$error.email">
                        <div class="arrowUp"></div>
                        <div class="errorMessage">
                            Your email address is invalid!
                        </div>
                    </div>
                </div>
            </div>

            <div class="price-block">
                <h2>Price</h2>
                <label>Base price of the gift.<input type="checkbox" id="tooltip-checkbox"/><label for="tooltip-checkbox"><span class="tooltip-icon">?<span class="tooltip">Due to retailer price fluctuation, <a href="/faq?why-raise-for-the-full-price" target="_blank">we must raise for the full product price.</a></span></span></label></label>
                <div class="money" id="price">${{inputPrice}}</div>
            </div>

            <div class="total-price-block">
                <h2>Total Price</h2>
                <label>Incl. taxes, shipping, and handling.</label>
                <div class="money" ng-hide="fetchingTaxRate || !shippingDetailsSubmitted">${{ totalPrice/100 | number : 2 }}</div><div class="money" ng-hide="shippingDetailsSubmitted">...</div><img class="loading" src="/assets/loading.gif" ng-show="fetchingTaxRate"/>
            </div>
        </form>

        <button id="giftstart-create-submit" class="float-right next" ng-click="next()">Create</button>

    </div>
</div>

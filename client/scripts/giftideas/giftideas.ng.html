<div id="giftideas" class="ui container">
    <div ng-show="product" class="singleproduct main pad">
        <div class="head">
            <div class="hero">
                <div class="ui one cards">
                    <a class="red card">
                        <div class="image">
                            <img src="/assets/giftideas/category{{product.productImage}}" alt="{{product.imageAltText}}">
                        </div>
                    </a>
                </div>
            </div>
            <div class="titles">
                <button ng-click="goToLink(product.giftStartLink)" target="_self" class="teal ui huge button icon teal top attached" ng-show="product.hasPrice">
                    <i class="gift icon"></i>
                    Gift It
                </button>
                <div class="scrollbox ui segment card attached">
                    <div class="content">
                        <div class="header">
                            <span ng-bind-html="product.productName"></span>
                        </div>
                        <div class="meta">${{product.productPrice}}</div>
                        <div class="description">
                            <span ng-bind-html="product.productDescription"></span>
                        </div>
                    </div>
                </div>
                <button onclick="olark('api.box.expand')" class="teal ui button" ng-show="!product.hasPrice">Contact The Gift Concierge</button>
                <div ng-show="product.hasPrice" class="saveforlater">
                    <button ng-click="saveGiftIdeaForLater(product);" ng-class="{loading: isSavingForLater}" class="ui icon large button bottom attached" ng-show="product.hasPrice">
                        <i class="bookmark icon"></i>
                        Save for Later
                    </button>
                    <div class="product-message" ng-bind-html="productMessage"></div>
                </div>
            </div>
        </div>
        <div class="clear"></div>
    </div>

    <div ng-show="category" class="products">
        <div class="main pad" ng-show="!product">
            <div class="ui stackable four column grid">
                <div class="eight wide column">
                    <h2 class="ui center aligned header">
  					    <img class="ui circular image" src="/assets/giftideas/category/{{category.categorySlug}}.jpg" alt="{{category.categorySlug}}" style="display: block; margin: 0 auto .5rem;width: 57%;">
				    </h2>
                </div>
                <div class="eight wide column">
                    <div class="ui piled segment padded left aligned secondary">
                        <h2 class="header">
                            {{category.categoryName}}
                        </h2>
                        <p ng-bind-html="category.categoryBlurb"></p>
                    </div>
                </div>
            </div>
            <div class="clear"></div>
            <h2 class="ui center aligned header">
			    {{category.categoryName}}
		    </h2>
        </div>
        <slick ng-if="giftproducts.length" data="products" class="ui segment"  lazy-load="ondemand" slides-to-show="4" slides-to-scroll="4" >
            <div ng-repeat="giftproduct in giftproducts track by $index" class="ui centered stackable grid">
                <div class="column">
                    <div class="ui fluid card">
                        <a class="image" href="{{categoryPath}}/{{giftproduct.productSlug}}">
                            <img ng-src="/assets/giftideas/category{{giftproduct.productThumb}}" alt="{{giftproduct.imageAltText}}" class="load" />
                        </a>
                        <div class="content">
                            <a class="header" ng-bind-html="giftproduct.productNameShort" href="{{categoryPath}}/{{giftproduct.productSlug}}"></a>
                            <div class="meta">
                                <a href="{{categoryPath}}/{{giftproduct.productSlug}}">${{ giftproduct.productPrice }}</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </slick>
        <div class="clear"></div>
    </div>

    <div class="ui container text">
        <div class="ui basic segment">
        <h1 class="ui huge header">
          Whatâ€™s popular
          <div class="sub header">We've curated lists of our most popular gifts. Not sure what to give? That's alright, we've already found the perfect gift.</div>
        </h1>
        </div>
    </div>
    <div class="ui segment basic">
        <div class="ui five doubling cards">
            <div ng-repeat="idea in giftideas|orderBy:'isNew':true" class="giftidea card">
                <a class="ui image" href="{{idea.url}}">
                    <div class="ui red ribbon label" ng-show="{{idea.isNew}}">
                          <i class="gift icon"></i> New
                    </div>
                    <img data-src="{{idea.img}}" src="{{idea.img}}" alt="{{idea.alt}}" class="load" />
                </a>
                <div class="content">
                    <a class="header" href="{{idea.url}}">{{idea.title || '...'}}</a>
                    <div class="description">
                        {{idea.description || '...' }}
                    </div>
                </div>
                <div class="extra content">
                    <a class="center" href="{{idea.url}}">
                        <i class="unhide icon"></i> {{idea.button}}
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="ui section divider"></div>
    <div class="ui container text" ng-controller="ConciergeController">
        <div class="ui segment basic">
            <h1 class="ui header">
                Give any gift with the Gift Concierge
                <div class="sub header">
                    Need help coming up with a gift idea? We are here to help.
                </div>
            </h1>
            <div class="ui piled segment">
                <form ng-submit="sendMsg()" class="ui form" ng-class="{error: !validateForm()}">
                    <h4 class="ui dividing header">Provide a few details below to contact the Gift Concierge.</h4>
                  <div class="field">
                     <div class="ui left icon input">
                         <i class="calendar icon"></i>
                         <input type="text" name="title" ng-model="title" placeholder="What event is the gift for?" />
                     </div>
                  </div>
                  <div class="field">
                     <div class="ui left icon input">
                         <i class="dollar icon"></i>
                         <input type="text" name="budget" ng-model="budget" placeholder="Is there a budget you want to stay within?" />
                     </div>
                  </div>
                  <div class="field">
                     <div class="ui left icon input">
                         <i class="gift icon"></i>
                         <input type="text" name="url" ng-model="url" placeholder="URL to the gift you're thinking of" />
                     </div>
                  </div>
                  <div class="field">
                      <div class="ui left icon input">
                          <i class="mail icon"></i>
                          <input type="email" name="email" ng-model="email" placeholder="Your email address (required)" />
                      </div>
                  </div>
                  <div class="field">
                     <div class="ui left icon input">
                         <i class="comment icon"></i>
                         <input type="text" name="comments" ng-model="comments" placeholder="Additional comments" />
                     </div>
                  </div>
                  <button type="submit" class="button ui teal icon fluid">
                      <i class="send icon"></i>
                      Make your request
                  </button>
                  <div class="ui message" ng-class="{hidden: msg.length === 0, error: !validateForm(), success: validateForm()}">
                      <div class="header" >
                          <span ng-hide="validateForm()">One last thing...</span>
                          <span ng-show="validateForm()">Thank you!</span>
                      </div>
                      <p>{{msg}}</p>
                  </div>
                </form>
            </div>
        </div>
    </div>
</div>
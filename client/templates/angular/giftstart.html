<div class="giftstart wrapper" ng-controller="GiftStartController" ng-mousemove="mouseActivityCallback('mouse-move')" ng-click="mouseActivityCallback('click')">

    <div class="thank-you block" ng-show="thanksEditable || editThanks || thanksMessage">
    <!--<div class="thank-you block">-->
        <div class="message">
            <div class="show-message" ng-hide="editThanks">
                <h1>GiftStart Success!</h1>
                <h3>A Thank You From the Recipient:</h3>
                <p>{{thanksMessage}}</p>
            </div>
            <div class="edit-message" ng-show="editThanks">
                <h1>Say Thank You!</h1>
                <p>Say a few words of thanks to those who pitched in, we'll send them a link when you're finished, and you can share it on your favorite social sites:</p>
                <textarea ng-model="newThanksMessage"></textarea>
                <div class="login-for-pic" ng-hide="loggedIn">
                    <p>Login to add a profile picture!</p><button class="white-fill" ng-click="showLogin()">Login</button>
                </div>
            </div>
        </div>
        <div class="image">
            <img ng-src="{{thanksImgUrl}}" ng-show="giftStart.thanks_img_url && !editThanks"/>
            <gs-image-upload ng-show="editThanks"></gs-image-upload>
        </div>
        <div class="buttons">
            <button class="white-fill submit" ng-show="editThanks" ng-click="updateThanks();">Say Thanks!</button><button class="edit white-border" ng-show="thanksEditable && !editThanks" ng-click="editThanks=true;"><img class="edit" src="/assets/edit_icon.png"/></button>
        </div>
        <button class="cancel" ng-show="editThanks" ng-click="editThanks=false;">X</button>
    </div>

    <div class="join-in block" ng-show="newUser">
        <h1 class="accent">Join In!</h1>
        <a href="/what-is-it" class="what-is-it">Um, what is GiftStarter?</a>
    </div>

    <div class="description block">
        <div class="title">
            <h1 class="title" ng-hide="editMode">{{giftStart.title}}</h1><input class="title" ng-model="newTitle" ng-show="editMode"/><span class="title edit"></span>
        </div>
        <a ng-href="{{giftStart.product.product_url}}" rel="nofollow" class="title" target="_blank" ng-click="productLinkClicked();"><p class="title" ng-show="giftStart.product.title">{{giftStart.product.title}}</p><div><img class="logo" ng-show="giftStart.product.retailer_logo" ng-src="{{giftStart.product.retailer_logo}}"/><img class="logo" ng-mouseover="hideOverlay();" ng-mouseleave="showOverlay();" ng-src="{{giftStart.product.img_url}}"/></div></a>

        <div class="description">
            <span class="description edit"><textarea class="description" ng-model="newDescription" ng-show="editMode"></textarea></span>
            <span class="description" ng-hide="editMode" style="white-space: pre-line;">{{giftStart.description}}</span>
        </div>
        <div class="signature">
            <p ng-show="giftStart.gc_name.length > 0 || editMode" class="gift-champion">GiftStarted By:</p>
            <p class="name" ng-show="!editMode">{{giftStart.gc_name}}</p><input class="gc-name" ng-model="newGcName" ng-show="editMode"/>
            <button class="edit" ng-show="campaignEditable && !editMode" ng-click="editMode=true;"><img class="edit" src="/assets/edit_icon.png"/></button>
            <div class="save"><button class="save" ng-click="updateCampaign();" ng-show="editMode">Save</button><button class="save" ng-click="editMode=false;" ng-show="editMode">X</button></div>
        </div>
    </div>

    <div class="overlay block">
        <h3 class="step-one black" ng-show="newUser"><span class="circle step">1</span>Click the tiles you want to gift and pitch in!</h3>
        <div class="image-upload" ng-show="editMode"><label>Upload New Image:  </label><input id="campaign-image-input" type="file" capture="camera" accept="image/*"/></div>
        <gs-overlay ng-class="{initialized: pitchInsInitialized}" giftstart="giftStart" ng-click="selectionUpdated();"></gs-overlay>
        <div class="buttons">
            <button class="pitch-in button" ng-class="{disabled: giftStart.totalSelection == 0}" ng-click="pitchIn()" ng-mouseover="pitchInHoverCallback()" title="{{pitchinButtonHoverMessage}}">Pitch In ${{giftStart.totalSelection / 100 | number : 2}}</button>
            <h3 class="black step-two"><span ng-show="newUser" class="circle step">2</span>Share This GiftStart With Friends!</h3>
            <img class="share" src="/assets/share_email.png" ng-click="emailShare();" />
            <img class="share" src="/assets/share_facebook.png" ng-click="facebookShare();" />
            <img class="share" src="/assets/share_twitter.png" ng-click="twitterShare();" />
            <img class="share" src="/assets/share_google.png" ng-click="googlePlusShare();" />
        </div>
    </div>

    <div class="price block">
        <div class="price"><h2>Funded!</h2><h1>$<span class="giftstart product contribution">{{giftStart.funded / 100 | number : 2}}</span></h1></div><div class="price"><h2>Remaining</h2><h1>$<span class="giftstart product remaining">{{giftStart.remaining / 100 | number : 2}}</span></h1></div>
        <gs-funding-bar></gs-funding-bar>
        <div><h2>Time Left in GiftStart</h2><h1 class="countdown" ng-class="{danger: (secondsLeft < 86400) && (secondsLeft <= 0)}">{{countdown}}</h1></div>
        <gs-time-left-bar></gs-time-left-bar>
    </div>

    <div class="comments block">
        <h3 ng-show="newUser" class="black"><span class="circle step">3</span>Sign The Card!</h3><h3 class="black" ng-hide="newUser">Group Card</h3>
        <div class="comment" ng-repeat="pitchIn in pitchIns">
            <a ng-href="/users/{{pitchIn.uid}}"><img ng-src="{{pitchIn.img}}"/></a>
            <div><p>{{pitchIn.note}}</p><p class="name">{{pitchIn.name}}</p></div>
        </div>
        <p class="no-contributors" ng-hide="pitchIns.length > 0">No contributors yet - be the first one on the card!</p>
    </div>
</div>